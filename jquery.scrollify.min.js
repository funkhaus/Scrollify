!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(o){return t(o,e,e.document)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),e,e.document):t(jQuery,e,e.document)}("undefined"!=typeof window?window:this,function(e,t,o,n){"use strict";function i(o,n,i,r){if(m===o&&(i=!1),!0===M)return!0;if(f[o]){if(H=!1,i&&L.before(o,d),v=1,N=l[o],!1===D&&m>o&&!1===r&&p[o]&&(v=parseInt(d[o].outerHeight()/w.height()),N=parseInt(l[o])+(d[o].outerHeight()-w.height())),L.updateHash&&L.sectionName&&(!0!==D||0!==o))if(history.pushState)try{history.replaceState(null,null,f[o])}catch(e){t.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else t.location.hash=f[o];if(D&&(L.afterRender(),D=!1),m=o,n)e(L.target).stop().scrollTop(N),i&&L.after(o,d);else{if(b=!0,e().velocity?e(L.target).stop().velocity("scroll",{duration:L.scrollSpeed,easing:L.easing,offset:N,mobileHA:!1}):e(L.target).stop().animate({scrollTop:N},L.scrollSpeed,L.easing),t.location.hash.length&&L.sectionName&&t.console)try{e(t.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(e){}e(L.target).promise().done(function(){b=!1,D=!1,i&&L.after(o,d)})}}}function r(e){function t(t){for(var o=0,n=e.slice(Math.max(e.length-t,1)),i=0;i<n.length;i++)o+=n[i];return Math.ceil(o/t)}return t(10)>=t(70)}function s(e,t){for(var o=f.length;o>=0;o--)"string"==typeof e?f[o]===e&&(g=o,i(o,t,!0,!0)):o===e&&(g=o,i(o,t,!0,!0))}var a,c,u,h,l=[],f=[],d=[],p=[],g=0,m=0,v=1,y=!1,w=e(t),S=w.scrollTop(),H=!1,b=!1,E=!1,M=!1,x=[],T=(new Date).getTime(),D=!0,I=!1,N=0,k="onwheel"in o?"wheel":o.onmousewheel!==n?"mousewheel":"DOMMouseScroll",L={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},z=function(n){function s(t){e().velocity?e(L.target).stop().velocity("scroll",{duration:L.scrollSpeed,easing:L.easing,offset:t,mobileHA:!1}):e(L.target).stop().animate({scrollTop:t},L.scrollSpeed,L.easing)}function m(t){t&&(S=w.scrollTop());var o=L.section;p=[],L.interstitialSection.length&&(o+=","+L.interstitialSection),!1===L.scrollbars&&(L.overflowScroll=!1),e(o).each(function(t){var o=e(this);L.setHeights?o.is(L.interstitialSection)?p[t]=!1:o.css("height","auto").outerHeight()<w.height()||"hidden"===o.css("overflow")?(o.css({height:w.height()}),p[t]=!1):(o.css({height:o.height()}),L.overflowScroll?p[t]=!0:p[t]=!1):o.outerHeight()<w.height()||!1===L.overflowScroll?p[t]=!1:p[t]=!0}),t&&w.scrollTop(S)}function D(o,n){var r=L.section;L.interstitialSection.length&&(r+=","+L.interstitialSection),l=[],f=[],d=[],e(r).each(function(o){var n=e(this);l[o]=o>0?parseInt(n.offset().top)+L.offset:parseInt(n.offset().top),L.sectionName&&n.data(L.sectionName)?f[o]="#"+n.data(L.sectionName).toString().replace(/ /g,"-"):!1===n.is(L.interstitialSection)?f[o]="#"+(o+1):(f[o]="#",o===e(r).length-1&&o>1&&(l[o]=l[o-1]+(parseInt(e(e(r)[o-1]).outerHeight())-parseInt(e(t).height()))+parseInt(n.outerHeight()))),d[o]=n;try{e(f[o]).length&&t.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(e){}t.location.hash===f[o]&&(g=o,y=!0)}),!0===o&&i(g,!1,!1,!1)}function N(){return!p[g]||!((S=w.scrollTop())>parseInt(l[g]))}function z(){return!p[g]||!((S=w.scrollTop())<parseInt(l[g])+(d[g].outerHeight()-w.height())-28)}I=!0,e.easing.easeOutExpo=function(e,t,o,n,i){return t==i?o+n:n*(1-Math.pow(2,-10*t/i))+o},c={handleMousedown:function(){if(!0===M)return!0;H=!1,E=!1},handleMouseup:function(){if(!0===M)return!0;H=!0,E&&c.calculateNearest(!1,!0)},handleScroll:function(){if(!0===M)return!0;a&&clearTimeout(a),a=setTimeout(function(){if(E=!0,!1===H)return!1;H=!1,c.calculateNearest(!1,!0)},200)},calculateNearest:function(e,t){S=w.scrollTop();for(var o,n=1,r=l.length,s=0,a=Math.abs(l[0]-S);n<r;n++)(o=Math.abs(l[n]-S))<a&&(a=o,s=n);(z()&&s>g||N())&&(g=s,i(s,e,t,!1))},wheelHandler:function(o){if(!0===M)return!0;if(L.standardScrollElements&&(e(o.target).is(L.standardScrollElements)||e(o.target).closest(L.standardScrollElements).length))return!0;p[g]||o.preventDefault();var n=(new Date).getTime(),s=(o=o||t.event).originalEvent.wheelDelta||-o.originalEvent.deltaY||-o.originalEvent.detail,a=Math.max(-1,Math.min(1,s));if(x.length>149&&x.shift(),x.push(Math.abs(s)),n-T>200&&(x=[]),T=n,b)return!1;if(a<0){if(g<l.length-1&&z()){if(!r(x))return!1;o.preventDefault(),b=!0,i(++g,!1,!0,!1)}}else if(a>0&&g>0&&N()){if(!r(x))return!1;o.preventDefault(),b=!0,i(--g,!1,!0,!1)}},keyHandler:function(e){return!0===M||!0!==b&&void(38==e.keyCode||33==e.keyCode?g>0&&N()&&(e.preventDefault(),i(--g,!1,!0,!1)):40!=e.keyCode&&34!=e.keyCode||g<l.length-1&&z()&&(e.preventDefault(),i(++g,!1,!0,!1)))},init:function(){L.scrollbars?(w.on("mousedown",c.handleMousedown),w.on("mouseup",c.handleMouseup),w.on("scroll",c.handleScroll)):e("body").css({overflow:"hidden"}),w.on(k,c.wheelHandler),w.on("keydown",c.keyHandler)}},u={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(t){if(!0===M)return!0;if(L.standardScrollElements&&(e(t.target).is(L.standardScrollElements)||e(t.target).closest(L.standardScrollElements).length))return!0;var o;if(void 0!==t&&void 0!==t.touches)switch(o=t.touches[0],t.type){case"touchstart":u.touches.touchstart.y=o.pageY,u.touches.touchmove.y=-1,u.touches.touchstart.x=o.pageX,u.touches.touchmove.x=-1,u.options.timeStamp=(new Date).getTime(),u.touches.touchend=!1;case"touchmove":u.touches.touchmove.y=o.pageY,u.touches.touchmove.x=o.pageX,u.touches.touchstart.y!==u.touches.touchmove.y&&Math.abs(u.touches.touchstart.y-u.touches.touchmove.y)>Math.abs(u.touches.touchstart.x-u.touches.touchmove.x)&&(t.preventDefault(),u.touches.direction="y",u.options.timeStamp+u.options.timeGap<(new Date).getTime()&&0==u.touches.touchend&&(u.touches.touchend=!0,u.touches.touchstart.y>-1&&Math.abs(u.touches.touchmove.y-u.touches.touchstart.y)>u.options.distance&&(u.touches.touchstart.y<u.touches.touchmove.y?u.up():u.down())));break;case"touchend":!1===u.touches[t.type]&&(u.touches[t.type]=!0,u.touches.touchstart.y>-1&&u.touches.touchmove.y>-1&&"y"===u.touches.direction&&(Math.abs(u.touches.touchmove.y-u.touches.touchstart.y)>u.options.distance&&(u.touches.touchstart.y<u.touches.touchmove.y?u.up():u.down()),u.touches.touchstart.y=-1,u.touches.touchstart.x=-1,u.touches.direction="undetermined"))}},down:function(){g<l.length-1&&(z()&&g<l.length-1?i(++g,!1,!0,!1):Math.floor(d[g].height()/w.height())>v?(s(parseInt(l[g])+w.height()*v),v+=1):s(parseInt(l[g])+(d[g].outerHeight()-w.height())))},up:function(){g>=0&&(N()&&g>0?i(--g,!1,!0,!1):v>2?(v-=1,s(parseInt(l[g])+w.height()*v)):(v=1,s(parseInt(l[g]))))},init:function(){o.addEventListener&&L.touchScroll&&(o.addEventListener("touchstart",u.touchHandler,!1),o.addEventListener("touchmove",u.touchHandler,!1),o.addEventListener("touchend",u.touchHandler,!1))}},h={refresh:function(e,t){m(!0),D(t,!1),e&&L.afterResize()},handleUpdate:function(){h.refresh(!1,!1)},handleResize:function(){h.refresh(!0,!1)},handleOrientation:function(){h.refresh(!0,!0)}},L=e.extend(L,n),m(!1),D(!1,!0),!0===y?i(g,!1,!0,!0):setTimeout(function(){c.calculateNearest(!0,!1)},200),l.length&&(c.init(),u.init(),w.on("resize",h.handleResize),o.addEventListener&&t.addEventListener("orientationchange",h.handleOrientation,!1))};return z.move=function(t){if(t===n)return!1;t.originalEvent&&(t=e(this).attr("href")),s(t,!1)},z.instantMove=function(e){if(e===n)return!1;s(e,!0)},z.next=function(){g<f.length&&i(g+=1,!1,!0,!0)},z.previous=function(){g>0&&i(g-=1,!1,!0,!0)},z.instantNext=function(){g<f.length&&i(g+=1,!0,!0,!0)},z.instantPrevious=function(){g>0&&i(g-=1,!0,!0,!0)},z.destroy=function(){if(!I)return!1;L.setHeights&&e(L.section).each(function(){e(this).css("height","auto")}),w.off("resize",h.handleResize),L.scrollbars&&(w.off("mousedown",c.handleMousedown),w.off("mouseup",c.handleMouseup),w.off("scroll",c.handleScroll)),w.off(k,c.wheelHandler),w.off("keydown",c.keyHandler),o.addEventListener&&L.touchScroll&&(o.removeEventListener("touchstart",u.touchHandler,!1),o.removeEventListener("touchmove",u.touchHandler,!1),o.removeEventListener("touchend",u.touchHandler,!1)),l=[],f=[],d=[],p=[]},z.update=function(){if(!I)return!1;h.handleUpdate()},z.current=function(){return d[g]},z.disable=function(){M=!0},z.enable=function(){M=!1,I&&c.calculateNearest(!1,!1)},z.isDisabled=function(){return M},z.setOptions=function(o){if(!I)return!1;"object"==typeof o?(L=e.extend(L,o),h.handleUpdate()):t.console&&console.warn("Scrollify warning: setOptions expects an object.")},e.scrollify=z,z});
